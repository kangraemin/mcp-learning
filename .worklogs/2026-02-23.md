# Worklog: mcp — 2026-02-23

---

## 10:44 (auto)

### 작업 내용
- feat: 스토리지를 SQLite에서 로컬 마크다운 파일로 전환
- - storage.py 신규 작성: data/tils/YYYY-MM-DD-{slug}.md 파일 기반 CRUD
- - python-frontmatter 라이브러리로 YAML frontmatter 처리
- - tools.py: save_discussion_recap tool 추가 (저장 후 git commit/push 자동 실행)
- - prompts.py: discussion_recap 프롬프트 추가
- - resources.py, server.py: db 모듈 → storage 모듈로 교체

### 변경 파일
- `requirements.txt`
- `src/til_server/prompts.py`
- `src/til_server/resources.py`
- `src/til_server/server.py`
- `src/til_server/storage.py`
- `src/til_server/tools.py`

---

## 10:49 (auto)

### 작업 내용
- feat: TIL_REPO_PATH 환경변수로 저장 레포 분리 지원
- MCP 서버 등록 시 TIL_REPO_PATH를 주입하면
- 서버 코드와 데이터 레포를 분리할 수 있다.

### 변경 파일
- `src/til_server/storage.py`
- `src/til_server/tools.py`

---

## 10:51 (auto)

### 작업 내용
- chore: pyproject.toml 추가 및 til-server CLI entry point 설정
- uvx로 설치 없이 바로 실행 가능하도록 패키지 구성

### 변경 파일
- `pyproject.toml`
- `src/til_server/server.py`

---

## 11:01 (auto)

### 작업 내용
- refactor: save_discussion_recap 제거, create_til로 통합
- 두 툴의 역할이 중복되어 create_til 하나로 통합.
- docstring에 대화 요약 저장 용도도 명시.

### 변경 파일
- `src/til_server/prompts.py`
- `src/til_server/tools.py`

---

## 11:04 (auto)

### 작업 내용
- docs: README 전면 재작성 — 설치 가이드 및 기능 정리
- uvx 기반 설치, Windows 포함, GitHub 저장소 방식으로 업데이트

### 변경 파일
- `README.md`

---

## 11:09 (auto)

### 작업 내용
- feat: GitHub API 기반 TIL 저장소 모듈 추가
- urllib.request만 사용해 외부 의존성 없이 GitHub contents API로
- TIL 마크다운 파일 CRUD 구현. GITHUB_TOKEN 또는 gh auth token으로
- 인증, TIL_GITHUB_REPO 또는 자동 감지로 레포 설정.

### 변경 파일
- `src/til_server/github_storage.py`

---

## 11:10 (auto)

### 작업 내용
- refactor: storage.py를 github_storage 래퍼로 교체, tools.py 정리
- 기존 import 경로 유지를 위해 storage.py를 github_storage 재노출 모듈로
- 변환. tools.py에서 로컬 파일 경로(_TIL_REPO, Path) 관련 코드 제거.

### 변경 파일
- `src/til_server/storage.py`
- `src/til_server/tools.py`

---

## 11:16

### 요청사항
- til-server MCP가 Local scope로 등록된 이유 파악 및 user scope 이동
- README.md에 `-s user` 플래그 설치 안내 추가

### 작업 내용
- `~/.claude.json`에서 til-server를 project scope → user scope로 이동
- README.md 모든 `claude mcp add` 명령에 `-s user` 플래그 추가
- 주의사항 안내 문구 추가

### 작업 내용
- docs: MCP 등록 명령에 -s user 플래그 추가
- 모든 프로젝트에서 사용 가능하도록 user scope 설치 방법으로 안내.
- 플래그 없이 설치 시 project scope에 등록되는 점도 명시.

### 변경 파일
- `README.md`: `claude mcp add` 명령에 `-s user` 플래그 및 안내 문구 추가

### 토큰 사용량
- 모델: claude-sonnet-4-6
- 이번 작업: 34,463,169 토큰 / $21.07 (전체 누적, 스냅샷 없음)
- 소요 시간: 측정 불가
- 일일 누적: 34,463,169 토큰 / $21.07

---

## 11:19

### 요청사항
- MCP 설명/기능 최신화 여부 확인 및 수정

### 작업 내용
- server.py, resources.py 주석 4곳이 실제 구현과 불일치함을 확인
- storage 설명 "파일 기반" → "GitHub API 기반", discussion_recap 툴 제거, 디렉토리 초기화 설명 수정, 이번 주(월~일) → 최근 7일간 수정

### 변경 파일
- `src/til_server/server.py`: storage 설명, tools 목록, 초기화 주석 수정
- `src/til_server/resources.py`: list_week_tils 설명 "이번 주(월~일)" → "최근 7일간"

### 토큰 사용량
- 모델: claude-sonnet-4-6
- 이번 작업: 1,537,670 토큰 / $0.67
- 소요 시간: 측정 불가
- 일일 누적: 36,000,839 토큰 / $21.74


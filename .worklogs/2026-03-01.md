# Worklog: mcp — 2026-03-01

---

## 09:54

### 요청사항
- Notion 백엔드 추가 및 GitHub ↔ Notion 양방향 마이그레이션 기능 구현

### 작업 내용
- config.py 신규 생성 (설정 파일 관리, 백엔드 선택)
- notion_storage.py 신규 생성 (Notion API 백엔드 13개 함수 구현)
- storage.py를 라우터 패턴으로 리팩토링, tools.py에 migrate_backend 툴 추가, server.py 첫 실행 안내 추가

### 변경 파일
- `src/til_server/config.py`: 설정 파일(~/.til/config.json) 읽기/쓰기/백엔드 선택 모듈
- `src/til_server/notion_storage.py`: Notion API 기반 TIL CRUD + 마이그레이션 헬퍼
- `src/til_server/storage.py`: github_storage 재노출 → 동적 백엔드 라우터로 변경
- `src/til_server/github_storage.py`: _create_til_with_metadata() 마이그레이션 헬퍼 추가
- `src/til_server/tools.py`: migrate_backend MCP 툴 추가
- `src/til_server/server.py`: 첫 실행 안내 + 백엔드별 조건부 초기화
- `pyproject.toml`: notion-client optional dependency 추가
- `tests/test_config.py`: config 단위 테스트 15개
- `tests/test_storage_router.py`: 라우터 위임 테스트 5개
- `tests/test_notion_storage.py`: Notion 백엔드 mock 테스트 21개
- `tests/test_migration.py`: 양방향 마이그레이션 테스트 7개

### 토큰 사용량
- 모델: claude-opus-4-6
- 이번 작업: 7,396,095 토큰 / $4.67
- 소요 시간: 측정 불가
- 일일 누적: 65,445,670 토큰 / $36.90
---

## 09:55 (auto)

### 변경 파일
- `.gitignore`

